# Changelog

While going through the update process, whenever changes are made, they should be captured in a changelog that is stored at the root of the platform folder. The following is a sample changelog to illustrate the proper format:

*platform/changelog.txt*  

```txt
/
  add docs/
  add node_cache/
  add .npmrc
  add package-lock.json

  mod .editorconfig
  mod .gitignore
  mod package.json
  mod readme.md
  mod update-deps.cmd

  mov environment/ -> docs/
  mov notes.md -> docs/

  rem offline-cache/
  rem .yarnrc
  rem yarn.lock

/docs/
  mod notes.md

/src/app/
  mod index.ts

/src/workspace/files/
  update add node_cache/
  update add .npmrc
  update add package-lock.json

  update mod .editorconfig
  update mod package.json
  update mod readme.md
  update mod update-deps.cmd

  update rem .yarnrc
  update rem clean-cache.cmd
  update rem offline-cache
  update rem yarn.lock
```

From top to bottom (starting with the directory root), changes should be captured based on the directory the changes occurred in. The directories are organized hierarchically as they appear in the VS Code Explorer (or any other IDE directory tree). Indented below each directory are the sub-directories and files that have been affected All directories are post-fixed with a trailing `/` to differentiate them from files.

Each of the actions are listed in order of the action taken, with each action group organized with affected directories listed alphabetically, followed by files listed alphabetically. Actions, in organizational order, are:

* add - contents were added.
* mod - contents were modified.
* mov - contents were moved.
  * in the format of *source content* -> *destination directory*
* rem - contents were removed.

If an action is prefixed with `update`, it means that it was applied within the monorepo project generated during the [**Update Setup**](#update-setup) phase below. Any of these updates should be applied to the schematics project during the [**Integrate Changes**](#integrate-changes) phase.

If an entire directory was removed, it is assumed that all of its contents were also removed so you do not need to specify the changes within the affected directory as well.

**example**

```txt
/
  rem offline-cache
```

If an existing directory or file was moved to another directory and then modified, capture any relevant changes under the directory that it now exists in.

**example**  

```txt
/
  add docs

  mov environment -> docs
  mov notes.md -> docs

/docs/
  mod notes.md
```

If a directory was added, only capture changes within that directory if it would affect a previously existing directory or file that was moved into the new directory. 

In the above example, note that the `/docs` directory was added. Within the `/docs` directory, an `updates` directory was added (in which this document exists), as well as a `readme.md` file. The only change listed in the `/docs` section is the modification of the `notes.md` file that previously existed and was moved to `/docs`.

Updates to the project files generated by the schematics as a result of dependency updates will only affect two schematics:

* `/src/server/files`
* `/src/workspace/files`

When updating the dependencies for the project files in the [**Dependency Updates**](#dependency-updates) step below, be sure to capture the affected files in the changelog relative to the files they represent in the schematic. For instance:

Changes to `/update/package.json` would trigger the following changelog entry:

```text
/src/workspace/files
  mod package.json
```

Changes to `/update/server/Update.Web/Update.Web.csproj` would trigger the following changelog entry:

```text
/src/server/files/__name@classify__.Web
  mod __name@classify__.Web.csproj
```

When the update process has completed, this changelog will be the blueprint for the file hierarchy needed within the `platform` updates directory. Additionally, it will inform you of the modifications that need to be made to the internal platform repository, as well as any projects built with this project.
